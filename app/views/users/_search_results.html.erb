<turbo-frame id="search-results">
    <% if friends.any? %>
        <ul class="list-group">
            <% friends.each do |friend| %>
                <li class="list-group-item">
                    <%= render partial: "users/user_banner", locals: { 
                        user: friend, 
                        secondary_text: "@#{friend.user_id}",
                        right_partial: "users/user_friendship",
                        right_partial_params: {user: friend} }
                    %> 
                </li>
            <% end %>
        </ul>
    <% end %>
    <% if other_users.any? %>
        <div class="mt-2 mb-2">Other users:</div>
        <ul class="list-group">
            <% other_users.each do |other_user| %>
                <li class="list-group-item">
                    <%= render partial: "users/user_banner", locals: { 
                        user: other_user, 
                        secondary_text: "@#{other_user.user_id}",
                        right_partial: "users/user_friendship",
                        right_partial_params: {user: other_user} } 
                    %> 
                </li>
            <% end %>
        </ul>
    <% end %>
    <% if friend_requests.any? %>
        <div class="mt-2 mb-2">Friend requests:</div>
        <ul class="list-group">
            <% friend_requests.each do |friend_requester| %>
                <li class="list-group-item">
                    <%= render partial: "users/user_banner", locals: { 
                        user: friend_requester, 
                        secondary_text: "@#{friend_requester.user_id}",
                        right_partial: "users/user_friendship",
                        right_partial_params: {user: friend_requester} } 
                    %> 
                </li>
            <% end %>
        </ul>
    <% end %>
    <% if other_users.none? && friends.none? && friend_requests.none?%>
        <div class="h-100 text-secondary d-flex justify-content-center align-items-center">
            No users found.
        </div>
    <% end %>

    <% if other_users.respond_to?(:current_page) && other_users.next_page.present? %>
        <div class="d-flex justify-content-center mt-3">
            <%= link_to "Load more",
                        search_users_path(query: params[:query], page: users.next_page),
                        data: { turbo_frame: "search-results" },
                        class: "btn btn-outline-primary" %>
        </div>
    <% end %>

</turbo-frame>